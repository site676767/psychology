<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç | –û—Ü–µ–Ω–∫–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏</title>
    <link rel="icon" href="porfd.png">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Roboto, system-ui, sans-serif;
            background: linear-gradient(145deg, #2b3a4a 0%, #1d2a35 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px;
            margin: 0;
        }

        .card {
            max-width: 720px;
            width: 100%;
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(10px);
            border-radius: 40px;
            box-shadow: 0 30px 50px rgba(0, 0, 0, 0.45), 0 0 0 1px rgba(255, 255, 255, 0.1) inset;
            padding: 32px 28px;
            transition: all 0.2s ease;
        }

        h1 {
            font-size: 2.1rem;
            font-weight: 600;
            color: #1e2f3d;
            margin-bottom: 12px;
            letter-spacing: -0.5px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 3px solid #5f9ea0;
            padding-bottom: 18px;
        }

        h1 span {
            background: #1e2f3d;
            color: white;
            font-size: 1.2rem;
            padding: 5px 14px;
            border-radius: 60px;
            font-weight: 500;
        }

        .progress-container {
            background: #d9e2e7;
            height: 26px;
            border-radius: 40px;
            margin: 24px 0 20px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #5f9ea0, #3a7b8a);
            border-radius: 40px;
            transition: width 0.3s ease;
            box-shadow: 0 0 12px #7acfd6;
        }

        .percentage-badge {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1e3b4a;
            background: #eef5f7;
            display: inline-block;
            padding: 6px 18px;
            border-radius: 40px;
            margin-bottom: 20px;
            border: 1px solid #b0cfd3;
        }

        .question-box {
            background: white;
            border-radius: 30px;
            padding: 28px 22px;
            margin: 16px 0 26px;
            box-shadow: 0 10px 20px rgba(0, 20, 20, 0.2);
            border: 1px solid #cbdbe0;
        }

        .question-text {
            font-size: 1.6rem;
            font-weight: 550;
            line-height: 1.3;
            color: #10313c;
            margin-bottom: 32px;
        }

        .answers {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .answer-btn {
            background: #f2f9fc;
            border: 2px solid #86bac7;
            color: #15404d;
            font-size: 1.2rem;
            font-weight: 600;
            padding: 14px 32px;
            border-radius: 60px;
            cursor: pointer;
            transition: 0.1s ease;
            flex: 1 1 160px;
            box-shadow: 0 4px 0 #618b96;
        }

        .answer-btn:hover {
            background: #d5eff5;
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #4f737e;
        }

        .answer-btn:active {
            transform: translateY(3px);
            box-shadow: 0 1px 0 #4f737e;
        }

        .restart-btn {
            background: #314e5c;
            border: none;
            color: white;
            font-size: 1.2rem;
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.15s;
            box-shadow: 0 5px 0 #1a2e38;
            margin-top: 10px;
            border: 1px solid #59838d;
        }

        .restart-btn:hover {
            background: #3f6375;
            transform: translateY(-2px);
            box-shadow: 0 7px 0 #1a2e38;
        }

        .result-area {
            background: #dbeaf0;
            border-radius: 32px;
            padding: 30px 24px;
            text-align: center;
            border: 2px solid #aac9d2;
            margin: 25px 0 15px;
        }

        .verdict {
            font-size: 2rem;
            font-weight: 700;
            color: #003153;
            margin-bottom: 15px;
        }

        .description {
            font-size: 1.3rem;
            color: #1a4656;
            margin-bottom: 18px;
            font-weight: 500;
        }

        .help-phone {
            background: #c12b2b;
            color: white;
            font-size: 1.6rem;
            font-weight: 700;
            padding: 18px 15px;
            border-radius: 60px;
            letter-spacing: 1px;
            margin: 22px 0 5px;
            border: 3px solid #ffbaba;
            animation: gentlePulse 1.8s infinite;
        }

        @keyframes gentlePulse {
            0% { background-color: #b12828; box-shadow: 0 0 0 0 #ec7e7e; }
            50% { background-color: #d33a3a; box-shadow: 0 0 15px 5px #ff8a8a; }
            100% { background-color: #b12828; box-shadow: 0 0 0 0 #ec7e7e; }
        }

        .help-phone a {
            color: white;
            text-decoration: none;
            display: block;
        }

        .phone-number {
            font-size: 2.1rem;
            background: #ffffff30;
            border-radius: 50px;
            padding: 6px 20px;
            margin-top: 8px;
        }

        .small-note {
            color: #295763;
            font-size: 1rem;
            margin-top: 20px;
        }

        .warning-marker {
            background: #edb7b7;
            color: #970000;
            padding: 6px 15px;
            border-radius: 40px;
            font-weight: 600;
        }

        footer {
            text-align: center;
            color: #bfd6dd;
            margin-top: 20px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="card" id="app">
        <h1>üß† –ü—Å–∏—Ö–æ–º–µ—Ç—Ä–∏—è <span>—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å</span></h1>

        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ –ø—Ä–æ—Ü–µ–Ω—Ç -->
        <div class="progress-container">
            <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
        </div>
        <div class="percentage-badge" id="percentDisplay">0%</div>

        <!-- –û–±–ª–∞—Å—Ç—å –≤–æ–ø—Ä–æ—Å–∞ / —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ -->
        <div id="quizZone">
            <!-- —Å—é–¥–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç -->
        </div>

        <button class="restart-btn" id="restartBtn">üîÑ –ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ</button>
        <footer>‚Äî —á–µ—Å—Ç–Ω—ã–π —Ç–µ—Å—Ç –¥–ª—è —Å–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ ‚Äî</footer>
    </div>

    <script>
        (function() {
            // ----- –í–û–ü–†–û–°–´ (–ø—Ä–∏–¥—É–º–∞–Ω—ã –¥–ª—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ñ–æ–Ω–∞) -----
            const questions = [
                { text: "–í—ã —á–∞—Å—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Ç—Ä–µ–≤–æ–≥—É –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã?" },
                { text: "–í–∞–º —Ç—Ä—É–¥–Ω–æ –∑–∞—Å–Ω—É—Ç—å –∏–∑-–∑–∞ –º—ã—Å–ª–µ–π?" },
                { text: "–í—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å —Ö–æ—Ç–µ–ª–∏ —É–π—Ç–∏ –∏–∑ –∂–∏–∑–Ω–∏?", critical: true }, // –æ—Å–æ–±—ã–π
                { text: "–í–∞–º –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –±—É–¥—É—â–µ–µ –±–µ–∑–Ω–∞–¥–µ–∂–Ω–æ?" },
                { text: "–í—ã –ª–µ–≥–∫–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç–µ—Å—å –ø–æ –º–µ–ª–æ—á–∞–º?" },
                { text: "–í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–±—è –æ–¥–∏–Ω–æ–∫–∏–º, –¥–∞–∂–µ —Å—Ä–µ–¥–∏ –ª—é–¥–µ–π?" },
                { text: "–í–∞–º —Ç—Ä—É–¥–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ —ç–º–æ—Ü–∏–∏?" },
                { text: "–í—ã –∑–∞–º–µ—á–∞–µ—Ç–µ –ø–µ—Ä–µ–ø–∞–¥—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è?" },
                { text: "–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –∏–Ω—Ç–µ—Ä–µ—Å –∫ —Ç–æ–º—É, —á—Ç–æ —Ä–∞–Ω—å—à–µ –Ω—Ä–∞–≤–∏–ª–æ—Å—å?" },
                { text: "–í–∞–º –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –≤—ã –Ω–∏–∫–æ–º—É –Ω–µ –Ω—É–∂–Ω—ã?" }
            ];

            // ----- –°–û–°–¢–û–Ø–ù–ò–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø -----
            let currentIndex = 0;               // –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ (0..9)
            let knowledgePoints = 50;            // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π "—É—Ä–æ–≤–µ–Ω—å –∑–Ω–∞–Ω–∏–π/—É–º–∞" (–æ—Ç 1 –¥–æ 100) ‚Äî –ø–æ –ª–æ–≥–∏–∫–µ –¢–ó, —É –≤—Å–µ—Ö –Ω–∞—á–∞–ª–æ 50?
            let testFinished = false;
            let helpTriggered = false;           // –±—ã–ª –ª–∏ —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –≤ —ç—Ç–æ–º –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏?

            // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
            const quizZone = document.getElementById('quizZone');
            const progressFill = document.getElementById('progressFill');
            const percentDisplay = document.getElementById('percentDisplay');
            const restartBtn = document.getElementById('restartBtn');

            // ----- –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò -----
            function updateProgressAndPercent() {
                // –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä = —Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ (–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
                let totalQuestions = questions.length;
                let answeredCount = Math.min(currentIndex, totalQuestions); // —Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–∫–∞–∑–∞–Ω–æ (–æ—Ç–≤–µ—Ç–∏–ª–∏)
                let percentProgress = (answeredCount / totalQuestions) * 100;
                progressFill.style.width = percentProgress + '%';

                // –û–∫—Ä—É–≥–ª—è–µ–º knowledgePoints –æ—Ç 0 –¥–æ 100, –Ω–æ –Ω–µ –≤—ã—à–µ 100 –∏ –Ω–µ –Ω–∏–∂–µ 1
                let displayPercent = Math.min(100, Math.max(1, Math.round(knowledgePoints)));
                percentDisplay.innerText = displayPercent + '%';
            }

            // –ü–æ–∫–∞–∑–∞—Ç—å –∏—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ knowledgePoints (–ø—Ä–æ—Ü–µ–Ω—Ç)
            function renderResultScreen() {
                let rawPercent = Math.min(100, Math.max(1, Math.round(knowledgePoints)));
                let percent = rawPercent;

                let verdict = '';
                let description = '';

                // –§–æ—Ä–º–∏—Ä—É–µ–º –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ —à–∫–∞–ª–µ –∏–∑ –¢–ó (–æ—Ç 1 –¥–æ 100)
                if (percent < 10) {
                    verdict = 'üß© 2% ‚Äî –æ—á–µ–Ω—å –Ω–∏–∑–∫–∏–π –ø–æ—Ä–æ–≥';
                    description = '–ù–µ—É—Å—Ç–æ–π—á–∏–≤–∞—è –ø—Å–∏—Ö–∏–∫–∞, —É–º –Ω–µ —Å–æ–∑—Ä–µ–ª. –†–∞–Ω–Ω–∏–π —ç—Ç–∞–ø. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —â–∞–¥—è—â–∏–π —Ä–µ–∂–∏–º –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è.';
                } else if (percent >= 10 && percent <= 39) {
                    verdict = '‚ö° 10%‚Äì39%: —Å–ª–∞–±–∞—è –ø—Å–∏—Ö–∏–∫–∞';
                    description = '–ü—Å–∏—Ö–∏–∫–∞ –æ—Å–ª–∞–±–ª–µ–Ω–∞, —É–º vulnerable. –ù—É–∂–Ω–∞ –±–µ—Ä–µ–∂–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞.';
                } else if (percent >= 40 && percent <= 55) {
                    verdict = 'üåø 40%‚Äì55%: —Å—Ä–µ–¥–Ω—è—è –ø—Å–∏—Ö–∏–∫–∞, —É–º —Å–ª–∞–±–æ–≤–∞—Ç';
                    description = '–ü—Å–∏—Ö–∏–∫–∞ —Å—Ä–µ–¥–Ω—è—è, —É–º —Å–ª–∞–±—ã–π. –ï—Å—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å.';
                } else if (percent >= 56 && percent <= 59) {
                    verdict = 'üå§Ô∏è 56%: –ø—Å–∏—Ö–∏–∫–∞ —Å—Ä–µ–¥–Ω—è—è, —É–º —Å—Ä–µ–¥–Ω–∏–π';
                    description = '–°—Ä–µ–¥–Ω—è—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, —É–º —Å—Ä–µ–¥–Ω–∏–π. –ú–æ–∂–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –¥–∞–ª—å—à–µ.';
                } else if (percent >= 60 && percent <= 89) {
                    verdict = 'üí™ 60%‚Äì89%: —É–º–Ω—ã–π, —Ä–∞–∑–≤–∏—Ç—ã–π, –ø—Å–∏—Ö–∏–∫–∞ —Ö–æ—Ä–æ—à–æ';
                    description = '–•–æ—Ä–æ—à–∏–π —É—Ä–æ–≤–µ–Ω—å! –£–º —Ä–∞–∑–≤–∏—Ç, –ø—Å–∏—Ö–∏–∫–∞ —É—Å—Ç–æ–π—á–∏–≤–∞.';
                } else if (percent >= 90 && percent <= 99) {
                    verdict = 'üåü 90%‚Äì99%: –æ—Ç–ª–∏—á–Ω–∞—è –ø—Å–∏—Ö–∏–∫–∞ –∏ —É–º';
                    description = '–í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏. –û—Ç–ª–∏—á–Ω–∞—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å.';
                } else if (percent >= 100) {
                    verdict = 'üèÜ 100%: –∑—Ä–µ–ª—ã–π, —Ä–∞–∑–≤–∏—Ç—ã–π, –≥—Ä–∞–Ω–¥–∏–æ–∑–Ω–æ';
                    description = '–¢—ã —É–º–Ω—ã–π, —Ä–∞–∑–≤–∏—Ç—ã–π, –ø—Å–∏—Ö–∏–∫–∞ –≤ –ø–æ—Ä—è–¥–∫–µ. –ü–æ–ª–Ω–∞—è –∑—Ä–µ–ª–æ—Å—Ç—å!';
                }

                // –î–æ–ø –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –≤—ã—à–ª–æ –º–µ–Ω—å—à–µ 1% (–Ω–æ –º—ã –æ–≥—Ä–∞–Ω–∏—á–∏–ª–∏)
                if (percent < 2) percent = 2; // –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è

                let helpHtml = '';
                // –ï—Å–ª–∏ –±—ã–ª –∑–∞–¥–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å —Å –æ—Ç–≤–µ—Ç–æ–º "–ù–ï–¢" (helpTriggered === true) –ò–õ–ò –ø—Ä–æ—Ü–µ–Ω—Ç –Ω–∏–∂–µ 20?
                // –ù–æ —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó: –µ—Å–ª–∏ –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø—Ä–æ —É—Ö–æ–¥ –∏–∑ –∂–∏–∑–Ω–∏ –Ω–∞–∂–∞–ª "–Ω–µ—Ç" ‚Äî –∑–¥–æ—Ä–æ–≤, –∏–Ω–∞—á–µ (—Ç.–µ. –µ—Å–ª–∏ "–¥–∞") ‚Äî –æ—Ç–Ω–∏–º–∞–µ–º –∑–Ω–∞–Ω–∏–µ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–æ–º–µ—Ä.
                // –£ –Ω–∞—Å helpTriggered —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ true, –µ—Å–ª–∏ –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å –æ—Ç–≤–µ—Ç–∏–ª–∏ "–î–∞".
                if (helpTriggered) {
                    helpHtml = `
                        <div class="help-phone">
                            ‚ö†Ô∏è –í–∞–º –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å ‚ö†Ô∏è<br>
                            <div class="phone-number">
                                üìû <a href="tel:+74951234567">8-495-123-45-67</a>
                            </div>
                            <div style="font-size:1rem; margin-top:10px;">(–∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ, –∞–Ω–æ–Ω–∏–º–Ω–æ)</div>
                        </div>
                    `;
                } else if (percent < 30) {
                    // –ï—Å–ª–∏ –Ω–∏–∑–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç, –Ω–æ –Ω–µ –±—ã–ª–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ "–¥–∞", –≤—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–∏–º –Ω–æ–º–µ—Ä (–∑–∞–±–æ—Ç–∞)
                    helpHtml = `
                        <div class="help-phone" style="background: #447777;">
                            ü´Ç –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É<br>
                            <div class="phone-number">üìû <a href="tel:+78005553535">8-800-555-35-35</a></div>
                        </div>
                    `;
                }

                const resultHTML = `
                    <div class="result-area">
                        <div class="verdict">${verdict}</div>
                        <div class="description">${description}</div>
                        <div style="font-size:1.8rem; font-weight:800; margin:15px 0; color:#0d3c4a;">${percent}%</div>
                        ${helpHtml}
                        <div class="small-note">–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –≤–∞—à–∏—Ö –æ—Ç–≤–µ—Ç–∞—Ö. –ï—Å–ª–∏ –ø–ª–æ—Ö–æ ‚Äî –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É.</div>
                    </div>
                `;
                quizZone.innerHTML = resultHTML;
            }

            // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤–æ–ø—Ä–æ—Å –ø–æ –∏–Ω–¥–µ–∫—Å—É currentIndex
            function renderQuestion() {
                if (testFinished || currentIndex >= questions.length) {
                    testFinished = true;
                    renderResultScreen();
                    updateProgressAndPercent(); // –æ–±–Ω–æ–≤–∏–º %
                    return;
                }

                const q = questions[currentIndex];
                // –°—Ç—Ä–æ–∏–º —Ä–∞–∑–º–µ—Ç–∫—É –≤–æ–ø—Ä–æ—Å–∞
                const questionHtml = `
                    <div class="question-box">
                        <div class="question-text">${currentIndex+1}. ${q.text}</div>
                        <div class="answers">
                            <button class="answer-btn" data-answer="yes">‚úÖ –î–∞</button>
                            <button class="answer-btn" data-answer="no">‚ùå –ù–µ—Ç</button>
                        </div>
                    </div>
                `;
                quizZone.innerHTML = questionHtml;

                // –ù–∞–≤–µ—à–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤
                const yesBtn = document.querySelector('[data-answer="yes"]');
                const noBtn = document.querySelector('[data-answer="no"]');
                if (yesBtn) yesBtn.addEventListener('click', () => handleAnswer('yes'));
                if (noBtn) noBtn.addEventListener('click', () => handleAnswer('no'));

                updateProgressAndPercent();
            }

            // –õ–æ–≥–∏–∫–∞ –æ—Ç–≤–µ—Ç–∞
            function handleAnswer(answer) {
                if (testFinished) return;

                const currentQ = questions[currentIndex];
                let pointsDelta = 0;

                // --- –±–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è "knowledgePoints" (—É–º–∞/–∑–Ω–∞–Ω–∏—è) ---
                // –ó–∞ "–ù–µ—Ç" –æ–±—ã—á–Ω–æ –ø–æ–≤—ã—à–∞–µ–º —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –∑–∞ "–î–∞" –ø–æ–Ω–∏–∂–∞–µ–º (–∫—Ä–æ–º–µ –æ—Å–æ–±–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞)
                if (answer === 'yes') {
                    pointsDelta = -3;  // –¥–∞ = —Ç—Ä–µ–≤–æ–∂–Ω—ã–π –æ—Ç–≤–µ—Ç = –º–∏–Ω—É—Å –∫ —É—Ä–æ–≤–Ω—é
                } else { // 'no'
                    pointsDelta = +4;  // –Ω–µ—Ç = –∑–¥–æ—Ä–æ–≤—ã–π –æ—Ç–≤–µ—Ç = –ø–ª—é—Å –∫ —É—Ä–æ–≤–Ω—é
                }

                // --- –û–°–û–ë–´–ô –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –í–û–ü–†–û–° (–ø—Ä–æ —É—Ö–æ–¥ –∏–∑ –∂–∏–∑–Ω–∏) ---
                if (currentQ.critical) {
                    if (answer === 'yes') {
                        // –ï—Å–ª–∏ –Ω–∞–∂–∞–ª "–î–ê" (—Ö–æ—á–µ—à—å —É–π—Ç–∏) ‚Äì –æ—Ç–Ω–∏–º–∞–µ–º —É—Ä–æ–≤–µ–Ω—å –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–æ–º–µ—Ä
                        knowledgePoints -= 15;      // –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ (–∑–Ω–∞–Ω–∏–µ –ø–∞–¥–∞–µ—Ç)
                        helpTriggered = true;        // –≤–∫–ª—é—á–∞–µ–º –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
                    } else {
                        // –û—Ç–≤–µ—Ç "–ù–ï–¢" ‚Äì —Ç—ã –∑–¥–æ—Ä–æ–≤, –¥–æ–±–∞–≤–ª—è–µ–º –±–∞–ª–ª—ã, –∏ –Ω–æ–º–µ—Ä –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
                        knowledgePoints += 12;       // –∑–¥–æ—Ä–æ–≤—ã–π –æ—Ç–≤–µ—Ç —É–∫—Ä–µ–ø–ª—è–µ—Ç
                        // helpTriggered –æ—Å—Ç–∞—ë—Ç—Å—è false (–µ—Å–ª–∏ —Ä–∞–Ω–µ–µ –Ω–µ –±—ã–ª true)
                    }
                } else {
                    // –æ–±—ã—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å: –ø—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –¥–µ–ª—å—Ç—ã
                    knowledgePoints += pointsDelta;
                }

                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—Ü (—á—Ç–æ–±—ã –Ω–µ —É—Ö–æ–¥–∏–ª–æ –∑–∞ 1..100)
                knowledgePoints = Math.min(100, Math.max(1, knowledgePoints));

                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥. –≤–æ–ø—Ä–æ—Å—É
                currentIndex++;

                // –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∫–æ–Ω—á–∏–ª–∏—Å—å ‚Äì –∑–∞–≤–µ—Ä—à–∞–µ–º —Ç–µ—Å—Ç
                if (currentIndex >= questions.length) {
                    testFinished = true;
                    renderResultScreen();
                } else {
                    renderQuestion(); // —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
                }

                // –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å
                updateProgressAndPercent();
            }

            // –°–±—Ä–æ—Å —Ç–µ—Å—Ç–∞
            function restartTest() {
                currentIndex = 0;
                knowledgePoints = 50;          // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å
                testFinished = false;
                helpTriggered = false;
                renderQuestion();
                updateProgressAndPercent();
            }

            // ---- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø: –ø–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å ----
            restartTest();

            // –ö–Ω–æ–ø–∫–∞ —Ä–µ—Å—Ç–∞—Ä—Ç–∞
            restartBtn.addEventListener('click', () => {
                restartTest();
            });

            // –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –¥–≤–æ–π–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        })();
    </script>
</body>
</html>